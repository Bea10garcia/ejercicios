<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Ejercicio 2 Palíndromos</title>
    <style type="text/css">
    fieldset {
        width: 600px;
        margin: 30px auto 0 auto;
    }

    textarea {
        margin: 30px;
    }
    </style>
</head>

<body>
    <div style="text-align: center;">
        <h1>¿Es un palíndromo o no?</h1>
        <!-- hay que poner un campo form porque si no, al hacer el evento onclick, el campo name no lo recogía la función porque no podía llamar a name de textarea desde input -->
        <form>
            <fieldset>
                <label>Escribe tu frase o palabra:</label>
                <!-- con rows puedo determinar el tamaño de textarea -->
                <textarea name="fraseUsuario" required rows="3"></textarea><br>
                <input type="button" value="Descubre si es palíndromo" onclick="esPalindromo(fraseUsuario.value)">
                <p id="resultadoPalindromo"></p>
            </fieldset>
        </form>
    </div>
    <script type="text/javascript">
    function esPalindromo(fraseUsuario) {
        var fraseMinusculas = fraseUsuario.toLowerCase();
        /* expresión regular para normalizar los signos diacríticos, el rango u+0300 y u+036f abarcan todos los signos */
        var fraseMinusculas = fraseMinusculas.normalize('NFD').replace(/[\u0300-\u036f]/g, "");
        /* la g es global, así hace que reemplace todos los espacios, si no hubiera g sólo reemplazaría el primer espacio */
        var fraseMinusculas = fraseMinusculas.replace(/ /g, "");
        /* con esta estructura de control podemos recorremos la cadena hasta la mitad 
        i vale cero y partimos de cero en la cadena */
        for (i = 0; i < fraseMinusculas.length/2; i++) {
        	/* aquí comparamos el primer caracter con el último caracter y cuando i aumenta 1 en la siguiente vuelta, comparamos el segundo caracter con el penúltimo y cuando llegamos a la mitad de la cadena, se sabe si es o no palíndromo */
            if (fraseMinusculas[i] != fraseMinusculas[fraseMinusculas.length - 1 - i]) {
                document.getElementById("resultadoPalindromo").innerHTML = " La frase/palabra " + fraseMinusculas + " no es palíndromo ";
            } else {
                document.getElementById("resultadoPalindromo").innerHTML = " La frase/palabra " + fraseMinusculas + " es palíndromo ";
            }
        }
    }
    </script>
</body>

</html>